<h1>Add Item</h1>

<% if (messages.error) { %>
<div class="flash-message error"><%= messages.error %></div>
<% } %> <% if (messages.success) { %>
<div class="flash-message success"><%= messages.success %></div>
<% } %>

<form
  action="/org/events/add"
  method="POST"
  onsubmit="return validateTickets()"
>
  <label for="EventName">Event Name:</label>
  <input type="text" id="EventName" name="eventName" />

  <label for="price">Price:</label>
  <input type="text" id="price" name="price" />

  <label for="category">Category:</label>
  <select id="category" name="category" required>
    <% categories.forEach(category => { %>
    <option value="<%= category.categoryID %>"><%= category.name %></option>
    <% }); %>
  </select>

  <label for="orgid">Organization ID:</label>
  <input
    type="text"
    id="orgid"
    name="orgId"
    value="<%= session.organization.orgID %>"
    readonly
  />

  <label for="city">City:</label>
  <select id="city" name="cityId" required>
    <% cities.forEach(city => { %>
    <option value="<%= city.cityId %>"><%= city.cityName %></option>
    <% }); %>
  </select>

  <label for="TotalTickets">Total Tickets:</label>
  <input type="number" id="TotalTickets" name="TotalTickets" />

  <label for="RemainingTickets">Remaining Tickets:</label>
  <input type="number" id="RemainingTickets" name="RemainingTickets" />

  <label for="eventDate">Event Date:</label>
  <input type="date" id="eventDate" name="eventDate" />

  <label for="eventTime">Event Time:</label>
  <input type="time" id="eventTime" name="eventTime" />

  <label for="Description">Description:</label>
  <input type="text" id="Description" name="Description" />

  <button type="submit">Add Item</button>
</form>

<script>
  function validateTickets() {
    const totalTickets = parseInt(
      document.getElementById("TotalTickets").value
    );
    const remainingTickets = parseInt(
      document.getElementById("RemainingTickets").value
    );

    if (
      isNaN(totalTickets) ||
      isNaN(remainingTickets) ||
      remainingTickets > totalTickets ||
      totalTickets < 0 ||
      remainingTickets < 0
    ) {
      alert("Remaining Tickets should be less than or equal to Total Tickets.");
      return false;
    }

    return true;
  }
</script>
