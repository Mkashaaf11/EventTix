<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Bootstrap Example</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
      .btn{
        background-color: black;
        border: none;
      }
      .btn:hover{
        background-color: black;
      }
     
      .drop{
        border: none;
      }
      .bor{
        height: 350px;
        overflow: auto;
      }
      .tile{
        background-color: black;
        color: white;
      }
      .stick{
        position:sticky;
        top: 0.5px ;
    }

    </style>
</head>
<body>
   <div>
   <%
        if(events!=null)
        {
            events.forEach(event =>{    
        %>
        <div class="p-3 m-0 border-0 bd-example">
            <div class="d-flex tile rounded-1">
            <h3 class="p-2 w-100"><%= event.eventName%></h3> 
            <button class="btn  btn-dark collapsed p-2 flex-shrink-1" type="button" data-bs-toggle="collapse" data-bs-target=<%='#'+event.eventName%> aria-expanded="false" aria-controls=<%= event.eventName%>>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                  </svg>
            </button>
            </div>  
        <div class="bor table-responsive collapse" id=<%= event.eventName%>>
        <div class="drop card card-body">   
        <table class="table table-borderless" >  
        <thead class="table-dark stick">   
        <tr>
                <th scope="col">#</th>
                <th scope="col">Name</th>
                <th scope="col">City</th>
                <th scope="col">Tickets Booked</th>
                <th scope="col">Total Amount</th>
                <th scope="col">Reservation Time</th>
         </tr>   
        </thead>
        <tbody>    
        <%if(event.count>0){
          let i=1;
          const specific=reserve.filter(s=>s.eventId==event.eventId);
          specific.forEach(e=>{ 
        %>
        <tr >
         <th scope="row"><%=i%></th>
         <td><%= e.username%></td>
         <td><%= e.cityName %></td>
         <td ><%= e.ticket_quantity %></td>
         <td ><%= e.total_amount%></td>
         <td ><%= e.reservationTime %></td>
         </tr>
        
         <%i=i+1; });
         %>
        <%}
         else{ %>
            <tr>
                <td colspan="6" align="center">No Reservation yet!</td>
            </tr>
        
        <%}%>   
        </tbody>
        </table>
        </div>
        </div>
        </div>
        <%
        });
         }
        else
        {
        %>
        <div>No events available!</div>
        </div>

        <%
        }
        %>
       <script>
        
      
       </script>

    </body>
    </html>
    